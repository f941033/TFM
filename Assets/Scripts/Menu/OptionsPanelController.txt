using UnityEngine;
using UnityEngine.UI;

public class OptionsPanelController : MonoBehaviour
{
    [Header("Sliders")]
    public Slider musicSlider;
    public Slider sfxSlider;

    private AudioSettings audioSettings;

    void Awake()
    {
        audioSettings = FindFirstObjectByType<AudioSettings>();
        if (audioSettings == null)
            Debug.LogError("AudioSettings no encontrado en la escena");
    }

    void Start()
    {
        // Inicializa los sliders con los valores actuales
        musicSlider.value = AudioSettings.MusicVolume;
        sfxSlider.value = AudioSettings.SFXVolume;

        // Añade los listeners (solo una vez)
        //musicSlider.onValueChanged.AddListener(audioSettings.OnMusicVolumeChanged);
        //sfxSlider.onValueChanged.AddListener(audioSettings.OnSFXVolumeChanged);
    }

    void OnEnable()
    {
        // Sincroniza visualmente sin disparar OnValueChanged
        musicSlider.SetValueWithoutNotify(AudioSettings.MusicVolume);
        sfxSlider.SetValueWithoutNotify(AudioSettings.SFXVolume);
    }
}
